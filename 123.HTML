<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Green Power - פתרונות הנעה חשמלית וסוללות ליתיום</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Assistant:wght@400;600;700;800&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-color: #1abc9c;
            --primary-color-dark: #16a085;
            --secondary-background: #e8f8f5;
            --text-dark: #2c3e50;
            --text-light: #576574;
            --border-color: #dee2e6;
            --background-light: #f8f9fa;
        }
        body {
            font-family: 'Assistant', sans-serif;
            background-color: var(--background-light);
            color: var(--text-dark);
            background-image: url('https://www.transparenttextures.com/patterns/clean-gray-paper.png');
        }
        
        html { scroll-behavior: smooth; }
        .section-title {
            background-image: linear-gradient(to right, var(--primary-color), #55e6c1);
            -webkit-background-clip: text; background-clip: text; color: transparent;
        }
        .hero-bg {
            background-color: #001f3f;
            background-image: 
                linear-gradient(rgba(0, 20, 30, 0.7), rgba(0, 40, 60, 0.8)), 
                url('https://images.pexels.com/photos/8439090/pexels-photo-8439090.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
        }
        
        .info-tooltip-container { position: relative; display: inline-block; cursor: pointer; }
        .info-tooltip-icon { color: var(--primary-color); font-weight: bold; border: 1px solid var(--primary-color); border-radius: 50%; width: 20px; height: 20px; display: inline-flex; justify-content: center; align-items: center; font-style: normal; }
        .info-tooltip-text { visibility: hidden; width: 250px; background-color: var(--text-dark); color: #fff; text-align: right; border-radius: 6px; padding: 10px; position: absolute; z-index: 10; bottom: 125%; left: 50%; margin-left: -125px; opacity: 0; transition: opacity 0.3s; }
        .info-tooltip-text::after { content: ""; position: absolute; top: 100%; left: 50%; margin-left: -5px; border-width: 5px; border-style: solid; border-color: var(--text-dark) transparent transparent transparent; }
        .info-tooltip-container:hover .info-tooltip-text { visibility: visible; opacity: 1; }

        .brand-logo-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 2rem;
            align-items: center;
        }
        .brand-logo-container img {
            max-height: 40px;
            width: 100%;
            object-fit: contain;
            filter: grayscale(100%);
            opacity: 0.6;
            transition: all 0.3s ease;
            cursor: pointer;
        }
        .brand-logo-container img:hover {
            filter: grayscale(0%);
            opacity: 1;
        }

        .card {
            background-color: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(5px);
            -webkit-backdrop-filter: blur(5px);
            border-radius: 12px;
            box-shadow: 0 4px 25px rgba(0, 31, 63, 0.08);
            transition: all 0.3s ease;
            border: 1px solid rgba(0, 0, 0, 0.05);
        }
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 30px rgba(0, 31, 63, 0.12);
        }
        .btn-primary {
            background-color: var(--primary-color);
            color: white;
            font-weight: bold;
            padding: 12px 24px;
            border-radius: 8px;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(22, 160, 133, 0.2);
        }
        .btn-primary:hover {
            background-color: var(--primary-color-dark);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(22, 160, 133, 0.3);
        }
        .control-radio:checked + label, .vehicle-selector-btn.selected, .control-radio-btn.selected {
            background-color: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }
        .control-radio-btn {
             padding: 0.5rem 1rem;
             border-radius: 8px;
             border: 2px solid var(--border-color);
             transition: all 0.2s;
             cursor: pointer;
        }
        input, textarea, select {
            border-radius: 8px;
            border: 1px solid var(--border-color);
            transition: all 0.3s ease;
        }
        input:focus, textarea:focus, select:focus {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(26, 188, 156, 0.1);
        }

        .step-transition { 
            transition: opacity 0.5s ease-out, transform 0.5s ease-out, max-height 0.5s ease-out; 
            max-height: 0; 
            opacity: 0; 
            transform: translateY(10px); 
            overflow: hidden; 
        }
        .step-transition.visible { 
            max-height: 2500px; /* Increased for larger content */
            opacity: 1; 
            transform: translateY(0); 
        }

        /* Testimonials Fade Styles */
        #testimonials-container .testimonial-slide {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            opacity: 0;
            transition: opacity 0.8s ease-in-out;
            pointer-events: none;
        }
        #testimonials-container .testimonial-slide.active {
            opacity: 1;
            pointer-events: auto;
        }
        
    </style>
</head>
<body>

    <!-- Header -->
    <header class="bg-white/70 backdrop-blur-md shadow-sm sticky top-0 z-50">
        <div class="container mx-auto px-4 py-3 flex justify-between items-center">
            <a href="#" class="flex items-center gap-2 text-2xl font-extrabold text-teal-700">
                <img src="data:image/jpeg;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQI12NgYGBgAAAABQABXvMqOgAAAABJRU5ErkJggg==" alt="Green Power Logo" class="h-12">
            </a>
             <nav class="hidden md:flex items-center gap-6 text-slate-600 font-semibold">
                  <a href="#master-calculator" class="hover:text-teal-500 transition-colors">מחשבון סוללות</a>
                  <a href="#pricelist-calculator" class="hover:text-teal-500 transition-colors">מחשבון ציוד</a>
                  <a href="#ai-recommender" class="hover:text-teal-500 transition-colors">✨ מתכנן חכם</a>
                  <a href="#ai-tools" class="hover:text-teal-500 transition-colors">🤖 כלי AI</a>
                  <a href="#services" class="hover:text-teal-500 transition-colors">שירותים</a>
                  <a href="#gallery" class="hover:text-teal-500 transition-colors">גלריה</a>
                  <a href="#testimonials" class="hover:text-teal-500 transition-colors">המלצות</a>
                  <a href="#about-us" class="hover:text-teal-500 transition-colors">אודות</a>
                  <a href="#contact" class="hover:text-teal-500 transition-colors">צור קשר</a>
             </nav>
            <div class="flex items-center gap-4">
                <button id="cart-button" class="relative">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-7 w-7 text-slate-600 hover:text-teal-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z" /></svg>
                    <span id="cart-count" class="absolute -top-2 -right-2 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center hidden">0</span>
                </button>
                <a href="https://wa.me/972533224879" target="_blank" class="btn-primary flex items-center gap-2 text-sm sm:text-base !py-2.5 !px-5">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 24 24" fill="currentColor"><path d="M.057 24l1.687-6.163c-1.041-1.804-1.588-3.849-1.587-5.946.003-6.556 5.338-11.891 11.893-11.891 3.181.001 6.167 1.24 8.413 3.488 2.245 2.248 3.481 5.236 3.48 8.414-.003 6.557-5.338 11.892-11.894 11.892-1.99-.001-3.951-.5-5.688-1.448l-6.305 1.654zm6.597-3.807c1.676.995 3.276 1.591 5.392 1.592 5.448 0 9.886-4.434 9.889-9.885.002-5.462-4.415-9.89-9.881-9.892-5.452 0-9.887 4.434-9.889 9.886-.001 2.267.651 4.39 1.88 6.161l-1.331 4.869 4.869-1.332z"/></svg>
                    <span>ייעוץ מיידי</span>
                </a>
            </div>
        </div>
    </header>

    <!-- Shopping Cart Sidebar -->
    <div id="cart-sidebar" class="fixed top-0 right-0 h-full w-full md:w-96 bg-white shadow-lg z-[60] transform translate-x-full transition-transform duration-300 ease-in-out">
        <div class="flex flex-col h-full">
            <div class="flex justify-between items-center p-4 border-b">
                <h2 class="text-2xl font-bold">עגלת קניות</h2>
                <button id="close-cart-btn" class="text-2xl">&times;</button>
            </div>
            <div id="cart-items" class="flex-grow p-4 overflow-y-auto">
                <!-- Cart items will be injected here -->
                <p id="empty-cart-msg" class="text-slate-500">העגלה שלך ריקה.</p>
            </div>
            <div class="p-4 border-t bg-slate-50">
                <div class="flex justify-between font-bold text-xl mb-4">
                    <span>סה"כ:</span>
                    <span id="cart-total">₪0</span>
                </div>
                <a id="whatsapp-checkout-btn" href="#" target="_blank" class="w-full btn-primary text-center block hidden">
                    שליחת הזמנה ב-WhatsApp
                </a>
            </div>
        </div>
    </div>
    <div id="cart-overlay" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden"></div>


    <!-- Hero Section -->
    <main class="hero-bg text-white">
        <div class="container mx-auto px-4 py-32 sm:py-48 text-center flex flex-col items-center">
            <h1 class="text-4xl md:text-7xl font-extrabold mb-4 drop-shadow-lg leading-tight">
                Green Power - <span id="hero-headline-dynamic" class="transition-opacity duration-500">הבית שלכם לאנרגיה חשמלית</span>
            </h1>
            <p class="text-lg md:text-2xl text-slate-100 max-w-3xl mx-auto mb-8 drop-shadow-md">
                אנו מתכננים ויוצרים פתרונות אנרגיה והנעה חשמלית מתקדמים. סוללות ליתיום, מערכות הנעה ורכיבי קצה - הכל בהתאמה מושלמת לכלי ולביצועים שלך.
            </p>
        </div>
    </main>

    <!-- Master Calculator Section -->
    <section id="master-calculator" class="container mx-auto px-4 -mt-20 mb-16 fade-in-section z-10 relative">
        <div class="card p-6 md:p-8">
            <h2 class="text-3xl md:text-4xl font-bold mb-2 text-center section-title">מחשבון סוללות חכם</h2>
            <div class="text-center mb-6">
                <span class="text-sm text-slate-500">המחירים מבוססים על תאי EVE. לשדרוג למותגים אחרים, צרו קשר.</span>
                <div class="info-tooltip-container ml-2">
                    <span class="info-tooltip-icon">i</span>
                    <div class="info-tooltip-text">
                        <b>🚀 סדרת PRO:</b> מבוססת תאי EVE 40P עם יכולת פריקת זרם גבוהה (10C). אידיאלי לתאוצות חזקות, כוח מתפרץ וביצועים מקסימליים.
                        <br><br>
                        <b>⚙️ סדרת CLASSIC:</b> מבוססת תאי EVE 50E עם קיבולת גבוהה (3C). אידיאלי לטווח נסיעה ארוך במיוחד ואמינות מירבית.
                    </div>
                </div>
            </div>

            <div id="calc-step-1">
                <p class="text-lg font-semibold text-center mb-4 text-slate-700">שלב 1: בחרו את סוג הכלי</p>
                <div id="vehicle-selector" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-5 gap-4">
                    <button class="vehicle-selector-btn p-4 rounded-lg bg-slate-50" data-vehicle="bikes">🚲<span class="font-bold text-slate-700 block mt-2">אופניים</span></button>
                    <button class="vehicle-selector-btn p-4 rounded-lg bg-slate-50" data-vehicle="scooters">🛴<span class="font-bold text-slate-700 block mt-2">קורקינטים</span></button>
                    <button class="vehicle-selector-btn p-4 rounded-lg bg-slate-50" data-vehicle="atv">🏞️<span class="font-bold text-slate-700 block mt-2">כלי שטח</span></button>
                    <button class="vehicle-selector-btn p-4 rounded-lg bg-slate-50" data-vehicle="enduro">🏍️<span class="font-bold text-slate-700 block mt-2">אינדורו</span></button>
                    <button class="vehicle-selector-btn p-4 rounded-lg bg-slate-50" data-vehicle="surron">⚡<span class="font-bold text-slate-700 block mt-2">סורון</span></button>
                </div>
            </div>
            <div id="calc-step-2" class="mt-6 step-transition">
                 <p id="step-2-title" class="text-lg font-semibold text-center mb-4 text-slate-700">שלב 2: בחרו פרמטרים</p>
                 <div id="parameter-selector" class="flex justify-center flex-wrap gap-2 md:gap-4 p-4 bg-slate-100/50 rounded-lg"></div>
            </div>
            <div id="calc-step-3" class="mt-6 step-transition">
                 <p id="step-3-title" class="text-lg font-semibold text-center mb-4 text-slate-700">שלב 3: בחרו פרמטרים נוספים</p>
                 <div id="parameter-selector-2" class="flex justify-center flex-wrap gap-2 md:gap-4 p-4 bg-slate-100/50 rounded-lg"></div>
            </div>
            <div id="calc-step-4" class="mt-6 step-transition">
                 <p class="text-lg font-semibold text-center mb-4 text-slate-700">שלב 4: בחרו קיבולת (Ah)</p>
                 <div id="capacity-selector" class="max-w-lg mx-auto bg-slate-100/50 p-4 rounded-lg"></div>
            </div>
            <div id="calc-result" class="mt-8 text-center bg-secondary-background p-6 rounded-lg step-transition border-2 border-teal-200">
                 <p class="text-xl text-slate-700">המחיר עבור <b id="master-selection-text" class="text-teal-800"></b> הוא:</p>
                 <p id="master-price-output" class="text-5xl font-extrabold text-teal-600 mb-4">--</p>
                 <button id="master-add-to-cart-btn" class="btn-primary hidden inline-flex items-center gap-2">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4" /></svg>
                    הוסף לסל
                 </button>
            </div>
        </div>
    </section>

    <!-- Pricelist Calculator Section -->
    <section id="pricelist-calculator" class="container mx-auto px-4 mb-16 fade-in-section">
        <div class="card p-6 md:p-8">
            <h2 class="text-3xl md:text-4xl font-bold mb-4 text-center section-title">מחשבון ציוד ושירותים</h2>
            <div id="pricelist-step-1">
                <p class="text-lg font-semibold text-center mb-4 text-slate-700">שלב 1: בחרו קטגוריה</p>
                <div id="category-selector" class="grid grid-cols-2 md:grid-cols-4 gap-4">
                    <button class="vehicle-selector-btn p-4 rounded-lg" data-category="motors">⚙️<span class="font-bold text-slate-700 block mt-2">מנועים</span></button>
                    <button class="vehicle-selector-btn p-4 rounded-lg" data-category="controllers">🧠<span class="font-bold text-slate-700 block mt-2">בקרים</span></button>
                    <button class="vehicle-selector-btn p-4 rounded-lg" data-category="chargers">🔌<span class="font-bold text-slate-700 block mt-2">מטענים</span></button>
                    <button class="vehicle-selector-btn p-4 rounded-lg" data-category="services">🔬<span class="font-bold text-slate-700 block mt-2">שירותי מעבדה</span></button>
                </div>
            </div>
            <div id="pricelist-step-2" class="mt-6 step-transition">
                <p id="pricelist-step-2-title" class="text-lg font-semibold text-center mb-4 text-slate-700"></p>
                <div id="subcategory-selector" class="flex justify-center flex-wrap gap-2 md:gap-4 p-4 bg-slate-100/50 rounded-lg"></div>
            </div>
             <div id="pricelist-step-3" class="mt-6 step-transition">
                <div class="flex flex-col md:flex-row justify-between items-center mb-4 gap-4">
                    <p id="pricelist-step-3-title" class="text-lg font-semibold text-center md:text-right"></p>
                    <div id="power-slider-container" class="w-full md:w-1/2 hidden">
                        <label for="power-slider" class="block text-sm font-medium text-slate-700 mb-1">סנן לפי עוצמה (וואט)</label>
                        <input type="range" id="power-slider" class="w-full">
                        <div class="flex justify-between text-xs text-slate-500 mt-1">
                            <span id="power-slider-min">0W</span>
                            <span id="power-slider-max">8000W</span>
                        </div>
                    </div>
                </div>
                <div id="item-selector" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"></div>
            </div>
        </div>
    </section>

     <!-- AI Recommender Section -->
    <section id="ai-recommender" class="container mx-auto px-4 mb-16 fade-in-section">
        <div class="card p-6 md:p-8">
            <h2 class="text-3xl md:text-4xl font-bold mb-4 text-center section-title">✨ מתכנן המערכות החכם</h2>
            <p class="text-center text-lg text-slate-600 mb-8 max-w-2xl mx-auto">לא בטוחים מה אתם צריכים? ענו על כמה שאלות והמומחה הדיגיטלי שלנו יבנה לכם המלצה למערכת חשמלית מלאה, המותאמת בדיוק לצרכים שלכם.</p>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 items-start">
                <div>
                    <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 mb-4">
                        <div>
                            <label for="recommender-vehicle" class="block font-semibold mb-2">1. סוג הכלי</label>
                            <select id="recommender-vehicle" class="w-full p-2">
                                <option value="אופניים חשמליות">אופניים חשמליות</option>
                                <option value="קורקינט חשמלי">קורקינט חשמלי</option>
                                <option value="כלי שטח (טרקטורון/RZR)">כלי שטח (טרקטורון/RZR)</option>
                                <option value="אופנוע אינדורו/שטח">אופנוע אינדורו/שטח</option>
                                <option value="סורון (Sur-Ron)">סורון (Sur-Ron)</option>
                            </select>
                        </div>
                        <div>
                            <label for="recommender-goal" class="block font-semibold mb-2">2. מטרה עיקרית</label>
                            <select id="recommender-goal" class="w-full p-2">
                                <option value="טווח נסיעה מקסימלי">טווח נסיעה מקסימלי</option>
                                <option value="תאוצה וכוח מתפרץ">תאוצה וכוח מתפרץ</option>
                                <option value="איזון בין טווח לביצועים">איזון בין טווח לביצועים</option>
                                <option value="שדרוג חסכוני">שדרוג חסכוני</option>
                            </select>
                        </div>
                        <div>
                             <label for="recommender-weight" class="block font-semibold mb-2">3. משקל רוכב (ק"ג)</label>
                             <input id="recommender-weight" type="number" class="w-full p-2" placeholder="לדוגמה: 85">
                        </div>
                        <div>
                            <label for="recommender-terrain" class="block font-semibold mb-2">4. תוואי שטח עיקרי</label>
                            <select id="recommender-terrain" class="w-full p-2">
                                <option value="עירוני מישורי">עירוני מישורי</option>
                                <option value="עירוני עם עליות">עירוני עם עליות</option>
                                <option value="שטח טכני">שטח טכני</option>
                                <option value="שבילים וכביש בינעירוני">שבילים וכביש בינעירוני</option>
                            </select>
                        </div>
                    </div>
                    <div class="mb-4">
                        <label for="recommender-notes" class="block font-semibold mb-2">5. בקשות מיוחדות (אופציונלי)</label>
                        <textarea id="recommender-notes" class="w-full p-2 h-24" placeholder="לדוגמה: צריך עמידות למים, התקנה פשוטה..."></textarea>
                    </div>
                    <button id="recommender-button" class="btn-primary w-full flex items-center justify-center gap-2">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z" /></svg>
                        ✨ קבל המלצה חכמה
                    </button>
                </div>

                <div id="recommender-result-container" class="bg-slate-50 p-4 rounded-lg min-h-[300px]">
                    <div id="recommender-loader" class="text-center py-10 hidden">
                        <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-teal-600 mx-auto mb-4"></div>
                        <p>המומחה שלנו מרכיב את המערכת המושלמת עבורך...</p>
                    </div>
                    <div id="recommender-result" class="prose max-w-none hidden"></div>
                </div>
            </div>
        </div>
    </section>

    <!-- AI Tools Section -->
    <section id="ai-tools" class="container mx-auto px-4 mb-16 fade-in-section">
        <h2 class="text-3xl md:text-4xl font-bold mb-8 text-center section-title">🤖 כלי AI נוספים</h2>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
            <!-- Range Calculator -->
            <div class="card p-6">
                <h3 class="text-2xl font-bold mb-3 text-center">מחשבון טווח נסיעה</h3>
                 <div class="mb-4">
                    <label for="range-battery" class="block font-semibold mb-1 text-sm">קיבולת סוללה (Ah)</label>
                    <input id="range-battery" type="number" class="w-full p-2" placeholder="לדוגמה: 25">
                 </div>
                 <div class="mb-4">
                    <label for="range-weight" class="block font-semibold mb-1 text-sm">משקל רוכב (ק"ג)</label>
                    <input id="range-weight" type="number" class="w-full p-2" placeholder="לדוגמה: 85">
                 </div>
                <button id="range-button" class="btn-primary w-full">חשב טווח נסיעה</button>
                <div id="range-result-container" class="mt-4 bg-slate-50 p-3 rounded-lg min-h-[80px] hidden"></div>
            </div>

            <!-- Fault Diagnoser -->
            <div class="card p-6">
                <h3 class="text-2xl font-bold mb-3 text-center">מאבחן תקלות AI</h3>
                <div class="mb-4">
                    <label for="fault-description" class="block font-semibold mb-1 text-sm">תאר את התקלה</label>
                    <textarea id="fault-description" class="w-full p-2 h-20" placeholder="לדוגמה: 'הקורקינט לא נדלק אחרי שעמד בגשם'"></textarea>
                </div>
                <button id="fault-button" class="btn-primary w-full">אבחן תקלה</button>
                <div id="fault-result-container" class="mt-4 bg-slate-50 p-3 rounded-lg min-h-[80px] hidden"></div>
            </div>
        </div>
    </section>
    
    <!-- Our Services Section -->
    <section id="services" class="container mx-auto px-4 mt-16 fade-in-section">
        <h2 class="text-4xl font-bold mb-8 text-center section-title">המומחיות שלנו</h2>
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
            <div class="card p-6 text-center">
                <div class="text-5xl mb-4">🔋</div>
                <h3 class="text-2xl font-bold mb-2">בניית סוללות בהתאמה אישית</h3>
                <p class="text-slate-600">תכנון והרכבת סוללות ליתיום מאפס, בהתאמה מושלמת למידות, למתח ולביצועים הנדרשים.</p>
            </div>
            <div class="card p-6 text-center">
                <div class="text-5xl mb-4">🔧</div>
                <h3 class="text-2xl font-bold mb-2">תיקונים ואבחון מקצועי</h3>
                <p class="text-slate-600">איתור ותיקון כל סוגי התקלות: החלפת BMS, איזון תאים, תיקוני חיווט ועוד, עם אחריות מלאה.</p>
            </div>
            <div class="card p-6 text-center">
                <div class="text-5xl mb-4">🚀</div>
                <h3 class="text-2xl font-bold mb-2">שדרוג מערכות חשמל</h3>
                <p class="text-slate-600">התקנת מערכת חשמלית מלאה (מנוע, בקר וסוללה) להגברת הביצועים באופן בטוח ואמין.</p>
            </div>
        </div>
    </section>

    <section id="gallery" class="container mx-auto px-4 my-16 fade-in-section">
        <h2 class="text-4xl font-bold mb-12 text-center section-title">גלריית עבודות ומוצרים</h2>
        <div id="gallery-grid" class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4"></div>
    </section>

    <div id="lightbox-modal" class="fixed inset-0 bg-black bg-opacity-80 flex justify-center items-center z-[100] hidden p-4"><div class="bg-white p-4 rounded-lg max-w-4xl max-h-[90vh] relative"><button id="close-modal" class="absolute top-2 right-2 text-4xl text-slate-600 hover:text-red-500 leading-none z-10">&times;</button><img id="lightbox-image" src="https://placehold.co/1x1/transparent/transparent" alt="תמונה מוגדלת של מוצר" class="max-w-full max-h-[80vh] object-contain mx-auto"><p id="lightbox-caption" class="text-center mt-2 text-slate-700 font-semibold"></p></div></div>

    <section id="testimonials" class="container mx-auto px-4 mt-16 fade-in-section">
        <div class="card p-8 overflow-hidden">
            <h2 class="text-4xl font-bold mb-8 text-center section-title">מה לקוחות אמיתיים מספרים עלינו</h2>
            <div id="testimonials-container" class="relative min-h-[250px] md:min-h-[220px]">
                <!-- Populated by JS -->
            </div>
        </div>
    </section>

    <!-- About Us & Brands Section -->
    <section id="about-us" class="container mx-auto px-4 mt-16 fade-in-section">
        <div class="card p-8">
            <h2 class="text-3xl md:text-4xl font-bold mb-6 text-center section-title">הכוח שמאחורי Green Power</h2>
            <div class="grid md:grid-cols-2 gap-8 items-center">
                <div class="prose max-w-none text-slate-700">
                    <p class="text-lg">במעבדת "Green Power" אנו מתמחים בתיקון, חידוש ובניית סוללות ליתיום לכל מטרה. אנו משתמשים בתאים איכותיים ממיטב היצרנים בעולם ובמערכות BMS חכמות, המבטיחות ביצועים מעולים, אמינות גבוהה ובטיחות לאורך זמן.</p>
                    <p>המומחיות שלנו מתרחבת מעבר לסוללות וכוללת שדרוג ומכירה של מערכות חשמל מלאות, לרבות מנועים, בקרים מתקדמים, ושירותי בניית גלגלים מקצועיים. אנו מציעים פתרונות מקיפים לשדרוג כלי תחבורה חשמליים, החל מקורקינטים ועד טרקטורונים.</p>
                     <ul class="list-none p-0 mt-4 space-y-3">
                         <li class="flex items-start"><span class="text-teal-500 font-bold text-xl mt-1 mr-2">✓</span><span><b>אחריות מקיפה:</b> 12 חודשים מלאים על כל עבודה, לשקט הנפשי שלך.</span></li>
                         <li class="flex items-start"><span class="text-teal-500 font-bold text-xl mt-1 mr-2">✓</span><span><b>שירות ארצי:</b> משלוחים מהירים ואיסוף מכל רחבי הארץ לנוחיותך המלאה.</span></li>
                         <li class="flex items-start"><span class="text-teal-500 font-bold text-xl mt-1 mr-2">✓</span><span><b>מקצועיות ללא פשרות:</b> שירות ברמה הגבוהה ביותר ופתרונות מותאמים אישית לכל לקוח.</span></li>
                     </ul>
                </div>
                <div>
                     <img src="https://images.pexels.com/photos/5771899/pexels-photo-5771899.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2" alt="עבודה מקצועית על סוללת ליתיום" class="rounded-lg shadow-md w-full h-auto object-cover">
                </div>
            </div>
            <div class="mt-12">
                <h3 class="text-center text-xl font-semibold text-slate-500 mb-6">עובדים עם המותגים המובילים בתעשייה</h3>
                <div id="brands-container" class="brand-logo-container">
                   <!-- Logos will be injected by JS -->
                </div>
            </div>
        </div>
    </section>
    
    <!-- Brand Info Modal -->
    <div id="brand-modal" class="fixed inset-0 bg-black bg-opacity-70 flex justify-center items-center z-[100] hidden p-4">
        <div class="bg-white p-6 rounded-lg max-w-2xl w-full relative card">
            <button id="close-brand-modal" class="absolute top-3 right-3 text-3xl text-slate-500 hover:text-red-500 leading-none">&times;</button>
            <div id="brand-modal-content"></div>
        </div>
    </div>


    <!-- Contact and Hours Section -->
     <section id="contact" class="container mx-auto px-4 mt-16 fade-in-section">
         <div class="card p-8">
             <h2 class="text-4xl font-bold mb-8 text-center section-title">יצירת קשר ושעות פעילות</h2>
             <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                 <div>
                     <h3 class="font-bold text-2xl text-slate-800 mb-4">פרטי התקשרות</h3>
                     <ul class="space-y-4 text-slate-600">
                         <li class="flex items-center gap-3"><svg class="w-6 h-6 text-teal-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"></path></svg><a href="tel:053-322-4879" class="hover:text-teal-500">053-322-4879</a></li>
                         <li class="flex items-center gap-3"><svg class="w-6 h-6 text-teal-500" fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M.057 24l1.687-6.163c-1.041-1.804-1.588-3.849-1.587-5.946.003-6.556 5.338-11.891 11.893-11.891 3.181.001 6.167 1.24 8.413 3.488 2.245 2.248 3.481 5.236 3.48 8.414-.003 6.557-5.338 11.892-11.894 11.892-1.99-.001-3.951-.5-5.688-1.448l-6.305 1.654z"></path></svg><a href="https://wa.me/972533224879" target="_blank" class="hover:text-teal-500">צ'אט בוואטסאפ (שירות ארצי)</a></li>
                         <li class="flex items-center gap-3"><svg class="w-6 h-6 text-teal-500" fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"></path></svg><a href="https://maps.app.goo.gl/e6KxJMmsStGSjTsA6" target="_blank" class="hover:text-teal-500">עובדיה מברטנורא 12, אלעד</a></li>
                     </ul>
                     <div class="mt-4 bg-amber-50 border-r-4 border-amber-400 p-3 rounded-r-lg">
                         <p class="font-semibold text-amber-800">אנא תאמו הגעה מראש.</p>
                     </div>
                 </div>
                 <div>
                      <h3 class="font-bold text-2xl text-slate-800 mb-4">שעות פעילות</h3>
                      <table class="w-full text-right text-slate-600">
                           <tbody class="divide-y divide-slate-200">
                               <tr class="flex justify-between py-2"><td>יום ראשון</td><td class="font-semibold">10:30–19:00</td></tr>
                               <tr class="flex justify-between py-2"><td>יום שני</td><td class="font-semibold">10:30–19:00</td></tr>
                               <tr class="flex justify-between py-2"><td>יום שלישי</td><td class="font-semibold">10:30–19:00</td></tr>
                               <tr class="flex justify-between py-2"><td>יום רביעי</td><td class="font-semibold">10:30–19:00</td></tr>
                               <tr class="flex justify-between py-2"><td>יום חמישי</td><td class="font-semibold">10:30–19:00</td></tr>
                               <tr class="flex justify-between py-2"><td>יום שישי</td><td class="font-semibold">10:30–14:00</td></tr>
                               <tr class="flex justify-between py-2"><td>יום שבת</td><td class="font-semibold text-red-500">סגור</td></tr>
                           </tbody>
                      </table>
                 </div>
             </div>
         </div>
     </section>

    <!-- Footer -->
    <footer class="bg-gray-800 text-white mt-16">
        <div class="container mx-auto px-4 py-10 text-center">
            <h2 class="text-3xl font-bold mb-4">מוכנים לשדרג את הכוח שלכם?</h2>
            <p class="text-slate-300 mb-6">צרו קשר עוד היום לייעוץ מקצועי, ובואו נבנה יחד את המערכת שתניע את הרכיבה הבאה שלכם.</p>
            <div class="flex justify-center flex-wrap gap-4">
                <a href="https://wa.me/972533224879" target="_blank" class="btn-primary">דברו איתנו בוואטסאפ</a>
            </div>
            <div class="mt-8 text-sm text-slate-400">
                <p>&copy; 2025 Green Power - כל הזכויות שמורות.</p>
            </div>
        </div>
    </footer>
    
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const pricingData = {
                bikes:   { name: "אופניים", type: 'simple', data: { PRO: { '48': { 24: 2450, 28: 2800, 32: 3150, 36: 3550, 40: 3900 }, '60': { 24: 3000, 28: 3450, 32: 3900, 36: 4400, 40: 4850 }, '72': { 24: 3700, 28: 4300, 32: 4850, 36: 5450, 40: 5950 } }, CLASSIC: { '48': { 15: 1450, 20: 1800, 25: 2150, 30: 2400, 35: 2750, 40: 3100, 45: 3400 }, '60': { 15: 1750, 20: 2150, 25: 2550, 30: 2950, 35: 3400, 40: 3800, 45: 4250 }, '72': { 15: 2050, 20: 2550, 25: 3050, 30: 3550, 35: 4100, 40: 4600, 45: 5150 } } } },
                scooters: { name: "קורקינט", type: 'simple', data: { PRO: { '48': { 24: 2150, 28: 2500, 32: 2800, 36: 3150, 40: 3450 }, '60': { 24: 2650, 28: 3050, 32: 3450, 36: 3900, 40: 4300 }, '72': { 24: 3300, 28: 3800, 32: 4300, 36: 4800, 40: 5250 } }, CLASSIC: { '48': { 25: 2050, 30: 2300, 35: 2650, 40: 3000, 45: 3300 }, '60': { 25: 2450, 30: 2850, 35: 3300, 40: 3700, 45: 4150 }, '72': { 25: 2950, 30: 3450, 35: 4000, 40: 4500, 45: 5050 } } } },
                atv:      { name: "כלי שטח", type: 'simple', data: { PRO: { '48': { 40: 3650, 44: 4000, 48: 4300, 52: 4650, 56: 4950, 60: 5300 }, '60': { 40: 4500, 44: 4900, 48: 5300, 52: 5750, 56: 6150, 60: 6550 }, '72': { 40: 5500, 44: 6000, 48: 6500, 52: 7050, 56: 7550, 60: 8100 } }, CLASSIC: { '48': { 40: 3100, 45: 3400, 50: 3800, 55: 4150, 60: 4500, 65: 5100, 70: 5500 }, '60': { 40: 3800, 45: 4250, 50: 4700, 55: 5100, 60: 5500, 65: 6200, 70: 6800 }, '72': { 40: 4600, 45: 5150, 50: 5700, 55: 6250, 60: 6800, 65: 7750, 70: 8150 } } } },
                enduro:   { name: "אינדורו", type: 'series', data: { EXTREME: { '72': { 30: 5450, 40: 6250, 50: 7150, 60: 7950 } }, CLASSIC: { '72': { 30: 3650, 40: 4600, 50: 5700, 60: 6800 } } } },
                surron:   { name: "סורון", type: 'model', data: { LightBee: [ { name: 'RANGE KING | 60V 60Ah', price: 9150 }, { name: 'ELITE | 72V 40Ah', price: 7800 }, { name: 'MAX EFFICIENCY | 72V 48Ah', price: 9450 } ], UltraBee: [ { name: 'ULTRA ELITE | 72V 52Ah', price: 10200 }, { name: 'ULTRA MAX | 72V 60Ah', price: 11600 }, { name: 'ULTRA PRO | 84V 52Ah', price: 11500 }, { name: 'COLOSSUS | 88V 48Ah', price: 11200 } ] } }
            };
            const pricelistData = {
                motors: {
                    name: "מנועים",
                    types: {
                        hub: { 
                            name: "מנוע גלגל (Hub)", 
                            description: "מנועי גלגל מציעים התקנה פשוטה ותחזוקה נמוכה, אידיאליים לרכיבה עירונית ולשיוט.",
                            items: [
                                { brand: "QS Motor", name: "QS273", spec: "72V | 8000W | 100A", price: 2990, power: 8000 },
                                { brand: "QS Motor", name: "QS205", spec: "72V | 5000W | 70A", price: 2190, power: 5000 },
                                { brand: "Suring Max", name: "SR50HDR", spec: "72V | 5000W | 70A", price: 1190, power: 5000 },
                                { brand: "Suring Max", name: "SR45HDR", spec: "72V | 3000W | 50A", price: 1190, power: 3000 },
                                { brand: "Suring Max", name: "SR35HDR", spec: "72V | 1500W | 45A", price: 790, power: 1500 },
                                { brand: "Suring Max", name: "SR30H", spec: "48V-72V | 1000W | 35A", price: 680, power: 1000 },
                                { brand: "Suring Max", name: "SR750NDR", spec: "48V | 750W", price: 590, power: 750 },
                                { brand: "Suring Max", name: "SR500DR", spec: "36V-48V | 500W", price: 490, power: 500 },
                                { brand: "Suring Max", name: "SR350DR", spec: "36V-48V | 350W", price: 380, power: 350 },
                                { brand: "Suring Max", name: "SR250DR", spec: "36V-48V | 250W", price: 390, power: 250 },
                                { brand: "Suring Max", name: "SR250DC", spec: "36V-48V | 250W", price: 420, power: 250 }
                            ]
                        },
                        mid: { 
                            name: "מנוע מרכזי (Mid-Drive)", 
                            description: "מנועים מרכזיים מספקים מומנט גבוה יותר, יעילות בטיפוס וביצועי שטח מעולים.",
                            items: [
                                { brand: "QS Motor", name: "QS180", spec: "72V | 8000W | 110A", price: 3150, power: 8000 },
                                { brand: "QS Motor", name: "QS165", spec: "72V | 7000W | 90A", price: 2050, power: 7000 },
                                { brand: "QS Motor", name: "QS138 90H", spec: "72V | 4000W | 80A", price: 2290, power: 4000 },
                                { brand: "QS Motor", name: "QS138 70H", spec: "72V | 3000W | 70A", price: 2250, power: 3000 },
                                { brand: "QS Motor", name: "QS120", spec: "72V | 2000W | 60A", price: 1490, power: 2000 }
                            ]
                        }
                    }
                },
                controllers: {
                    name: "בקרים",
                    brands: {
                        sabvoton: { name: "Sabvoton", items: [
                            { name: "SVMC72200", spec: "72V | 200A | 8000W", price: 1450, power: 8000 },
                            { name: "SVMC72150", spec: "72V | 150A | 5000W", price: 1350, power: 5000 },
                            { name: "SVMC72100", spec: "72V | 100A | 4000W", price: 1090, power: 4000 },
                            { name: "SVMC7245", spec: "72V | 45A | 3000W", price: 750, power: 3000 }
                        ]},
                        fardriver: { name: "Far Driver", items: [
                            { name: "ND72890", spec: "72V | 400A | 8000W", price: 2150, power: 8000 },
                            { name: "ND96680", spec: "96V | 350A | 8000W", price: 1350, power: 8000 },
                            { name: "ND96450", spec: "96V | 150A | 6000W", price: 930, power: 6000 },
                            { name: "ND72680", spec: "72V | 350A | 6000W", price: 890, power: 6000 },
                            { name: "ND72450", spec: "72V | 150A | 4000W", price: 550, power: 4000 },
                            { name: "ND72260", spec: "72V | 80A | 2000W", price: 430, power: 2000 },
                        ]},
                        sr: { name: "Suring Max (SR)", items: [
                            { name: "30 mosfet", spec: "100A | 3000W+", price: 410, power: 3000 },
                            { name: "24 mosfet", spec: "80-85A | 2-2.5kW", price: 390, power: 2500 },
                            { name: "18 mosfet", spec: "55-60A | 1.5-2kW", price: 240, power: 2000 }
                        ]},
                        kt: { name: "KT", items: [
                            { name: "15 mosfet", spec: "40-45A | 1-1.5kW", price: 120, power: 1500 },
                            { name: "12 mosfet", spec: "25-30A | 750-1kW", price: 110, power: 1000 },
                            { name: "9 mosfet", spec: "20-22A | 500-750W", price: 90, power: 750 },
                            { name: "6 mosfet", spec: "14-17A | 250-500W", price: 70, power: 500 }
                        ]}
                    }
                },
                chargers: { 
                    name: "מטענים",
                    types: {
                        smart: {
                            name: "מטעני אלומיניום (חכמים)",
                            description: "מטעני אלומיניום מציעים פיזור חום יעיל, אמינות גבוהה יותר ואפשרויות טעינה מהירה.",
                            items: [
                                { name: '72V | 20A (מהיר)', price: 1000, spec: 'טעינה אולטרה-מהירה', power: 20 },
                                { name: '72V | 15A (מהיר)', price: 800, spec: 'טעינה מהירה מאוד', power: 15 },
                                { name: 'מטען מהיר מתכוונן', price: 950, spec: 'עד 15A', power: 15 },
                                { name: '72V | 10A (מהיר)', price: 650, spec: 'טעינה מהירה מאוד', power: 10 },
                                { name: '72V | 5A-9A (אלומיניום)', price: 550, spec: 'טעינה מהירה', power: 9 },
                                { name: '60V | 4A-6A (אלומיניום)', price: 400, spec: 'טעינה מהירה', power: 6 }
                            ]
                        },
                        plastic: {
                            name: "מטעני פלסטיק",
                            description: "מטעני פלסטיק הם פתרון בסיסי וחסכוני לטעינה סטנדרטית.",
                            items: [
                                { name: '60V | 3A (פלסטיק)', price: 200, spec: 'טעינה סטנדרטית', power: 3 },
                                { name: '48V | 3A (פלסטיק)', price: 150, spec: 'טעינה סטנדרטית', power: 3 }
                            ]
                        }
                    } 
                },
                services: { name: "שירותי מעבדה", items: [ 
                    { name: "אבחון מעבדה מלא", price: 100, spec:'בדיקה מקיפה לאיתור תקלות (מתקזז בתיקון)' }, 
                    { name: "החלפת BMS", price: "החל מ-150", spec:'החלפת כרטיס ניהול סוללה תקול' }, 
                    { name: "החלפת תא פגום", price: 50, spec:'החלפה נקודתית של תא ליתיום תקול' }, 
                    { name: "איזון תאים עמוק", price: 150, spec:'איזון מתחים בין כל תאי הסוללה לשיפור ביצועים' }, 
                    { name: "תיקון ריתוך נקודתי", price: 80, spec:'תיקון נתקים או חיבורים רופפים בסוללה' }, 
                    { name: "טיפול בקורוזיה", price: "החל מ-100", spec:'ניקוי ושיקום נזקי קורוזיה ומים' }, 
                    { name: "בדיקת קיבולת", price: 100, spec:'בדיקת הקיבולת האמיתית (Ah) של הסוללה' }, 
                    { name: "החלפת שקע טעינה", price: 70, spec:'החלפת מחבר טעינה פגום או שבור' }, 
                    { name: "החלפת מחבר פריקה", price: 90, spec:'החלפת מחבר החשמל הראשי של הסוללה' } 
                ]}
            };
            const galleryItems = [
                { src: 'https://images.pexels.com/photos/8246343/pexels-photo-8246343.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2', caption: 'בנייה מדויקת של סוללת ליתיום' },
                { src: 'https://images.pexels.com/photos/5859341/pexels-photo-5859341.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2', caption: 'עבודה על מערכת הנעה חשמלית' },
                { src: 'https://images.pexels.com/photos/5771899/pexels-photo-5771899.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2', caption: 'אבחון ותיקון BMS בסוללה חכמה' },
                { src: 'https://images.pexels.com/photos/159291/samsung-s-4-s4-smartphone-product-shot-159291.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2', caption: 'מגוון תאי ליתיום איכותיים' },
                { src: 'https://images.pexels.com/photos/4317157/pexels-photo-4317157.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2', caption: 'סוללת סורון מוכנה למשלוח' },
                { src: 'https://images.pexels.com/photos/7989333/pexels-photo-7989333.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2', caption: 'גלגל עם מנוע Hub מוכן להתקנה' },
                { src: 'https://images.pexels.com/photos/8996328/pexels-photo-8996328.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2', caption: 'הלחמה עדינה של רכיבים אלקטרוניים' },
                { src: 'https://images.pexels.com/photos/6625126/pexels-photo-6625126.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2', caption: 'בדיקת ביצועים של בקר מנוע' }
            ];
            const testimonialsData = [
                { name: "OMER BUCHMAN", text: "אין עליכם בעולם, שירות מקצועי ואדיב! הגעתם עד אליי הביתה במיוחד. תודה רבה!" }, { name: "שמעון", text: "הגיע אליי עד לבית בימיוחד." }, { name: "דוד", text: "אחלה שירות, אחלה מחירים, אחלה איכות. הכי זול בעיר!" }, { name: "אשר מושקוביץ", text: "מעבדה מקצועית ואיכותית עם שירות לקוחות ברמה הגבוהה ביותר." }, { name: "נהוראי גול", text: "מקום מעולה, שירות אמין ואדיב. כיף לדעת שאתה מתקן אצל אלוף." }, { name: "אבריימי גרינוולד", text: "רמה גבוה ומחיר פצצה." }, { name: "Nevo Hen", text: "שירות מעולה, ממליץ בחום!" }, { name: "שליו פחימה", text: "וואלה אלוף, תיקון מהיר ומקצועי. רק אצלו!" }, { name: "MSTR Benjamin", text: "שירות מעולה ומהיר, מחירים טובים ועבודה במקום. :)" }, { name: "יפעת עוזירי", text: "מקצוענים אמיתיים, חווית שירות נהדרת." }, { name: "נהוראי אנג'ל", text: "היה ממש טוב ובמחיר פגז." }, { name: "David", text: "שירות פצצה, ממליץ בחום." }, { name: "Menachem David Lazar", text: "בס''ד איזה שרות טוב! ב''ה! ר' דניאל הי''ו משקיע את חכמתו וליבו לתת מוצר מצוין המותאם אישית ובדיוק לצרכים! הקב''ה יתן לו הרבה הצלחה!" }, { name: "yosef abu zaied", text: "קיבלתי סוללה איכותית, עבודה מצויינת. ממליץ מאוד." }, { name: "הראל מסיקה", text: "מושלם!!!! איזה שירות מעל המצופה! נהנתי מכל שניה, שירות מפורט! מקצועי מאוד! אין ספק שאתה מספר 1. תודה על הכול." }, { name: "אור אור", text: "וואוו איזה חווית קניה!! דניאל! צל\"ש על היחס החם והשירות שהענקת מהלב! בקיצר, ממליץ בחום ענק על בנאדם רציני שיודע ואוהב מה שהוא עושה! עלה והצלח!!!" }, { name: "רפאל יוסי", text: "‏עבודה מצוינת." }, { name: "ישראל בן אלי", text: "‏בן אדם אלוף, מומלץ בחום." }, { name: "יהודה צמח", text: "בן אדם מדהים עם הידיים הכי טובות בעיר, איכות וסבלנות שא\"א לתאר. דניאל, אין עליך בעולם, ממליץ!!!" }, { name: "יונתן סימקוב 2", text: "שירות מצוין, ממליץ בחום." }, { name: "ליאם אילאייב", text: "‏הבנאדם תותח, ‏פתר לי בעיה תוך יום. ‏עשה את העבודה הכי מקצועית שאני יכול להכיר. ממליץ בחום ואהבה." }, { name: "אליה גואטה", text: "שירות אדיב ומקצועי ❤️‏" }, { name: "עדן כהן", text: "קיבלנו שירות מצוין מ-Green Power! הסוללות תוקנו במקצועיות ובזמן, והכל נעשה באדיבות ובמחיר הוגן. בהחלט נשמח להמשיך לעבוד יחד בעתיד." }, { name: "נתי", text: "ואיי אני חייב להגיד תודה ענקית. שלחתי את הסוללה לתיקון והיא חזרה מעל מה שציפיתי, זה חזר כמו חדש..." }, { name: "יעקב רפאל", text: "אליפות!!! שירות וזמינות מעל הכללללל!!! אין בן אדם יותר אמין ממנו! בדוק! הכי זול - והכי מקצועי!!!!!! נ.ב. בן האנשים שבאמת רוצים לעזור לך..." }, { name: "Sergey Rubinshtein", text: "שירות מעולה, תודה רבה!" }, { name: "גיא טויטו", text: "אחלה איכות! אחלה שירות!" }, { name: "ישראל מאיר כהן", text: "ממליץ בחום, שירות אדיב ומקצועי." }, { name: "רות חדד", text: "הייתי במעבדת Green Power לבדיקה ורכישת סוללה וקיבלתי שירות פצצה: יחס טוב, אדיבות, אחריות והכי חשוב מחיר מעולה. ממליצה בחום." }, { name: "יוסף מויאל", text: "ואוו אחלה מעבדה. בנאדם אמין, העבודה שווה כול שקל, ידיים זהב." }, { name: "חיים תשובה", text: "תיקון מקצועי ואמין. ממליץ מאודד." }, { name: "Maor Hadad", text: "אני לא מפרגן בדרך כלל בביקורות בגוגל, אבל כאן הייתי חייב כי מדובר בבן אדם שאוהב את המקצוע שלו ואוהב בני אדם. זה המקום היחיד שאפשר לקבל בו מקצועיות ושירות ברמה כזאת נדירה❤️‏" }, { name: "Joseph Yakubov", text: "שירות טוב, עבודה מקצועית, ממש מרוצה!!" }, { name: "הודיה בר עזר", text: "תותחחח, אמין ומקצועי." }, { name: "אליאור חדד", text: "הכי טוב בארץ וכל מילה מיותרת." }, { name: "עטרה מחול", text: "בן אדם ישר ואמין, זריז ומקצועי. מומלץ מאד." }, { name: "Shlomo Friedman", text: "אין על דניאל! מומחה לכל דבר עם מנוע, עובד בצורה מקצועית עם המחירים הכי טובים! והכי חשוב, אדם אמין וישר! הכי מומלץ שיש." },
            ];
            const testimonialAvatars = [
                'https://images.pexels.com/photos/220453/pexels-photo-220453.jpeg?auto=compress&cs=tinysrgb&w=126&h=126&dpr=2', 'https://images.pexels.com/photos/614810/pexels-photo-614810.jpeg?auto=compress&cs=tinysrgb&w=126&h=126&dpr=2', 'https://images.pexels.com/photos/91227/pexels-photo-91227.jpeg?auto=compress&cs=tinysrgb&w=126&h=126&dpr=2', 'https://images.pexels.com/photos/1043471/pexels-photo-1043471.jpeg?auto=compress&cs=tinysrgb&w=126&h=126&dpr=2', 'https://images.pexels.com/photos/1516680/pexels-photo-1516680.jpeg?auto=compress&cs=tinysrgb&w=126&h=126&dpr=2', 'https://images.pexels.com/photos/2379004/pexels-photo-2379004.jpeg?auto=compress&cs=tinysrgb&w=126&h=126&dpr=2', 'https://images.pexels.com/photos/1222271/pexels-photo-1222271.jpeg?auto=compress&cs=tinysrgb&w=126&h=126&dpr=2',
                'https://images.pexels.com/photos/774909/pexels-photo-774909.jpeg?auto=compress&cs=tinysrgb&w=126&h=126&dpr=2', 'https://images.pexels.com/photos/1239291/pexels-photo-1239291.jpeg?auto=compress&cs=tinysrgb&w=126&h=126&dpr=2', 'https://images.pexels.com/photos/415829/pexels-photo-415829.jpeg?auto=compress&cs=tinysrgb&w=126&h=126&dpr=2'
            ];
            const brandData = {
                qs: { name: 'QS Motor', logo: 'https://logo.clearbit.com/qsmotor.com', info: 'QS Motor היא יצרנית מובילה של מנועים חשמליים בעלי ביצועים גבוהה, במיוחד מנועי Hub ומנועים מרכזיים. היא ידועה בעוצמה, באמינות וביכולת שלה לספק פתרונות הנעה ליישומים תובעניים.' },
                sr: { name: 'Suring Max (SR)', logo: 'https://placehold.co/150x40/f8f9fa/2c3e50?text=Suring+Max', info: 'Suring Max, הידועה גם כ-SR, היא יצרנית המתמחה במנועים ובקרים חסכוניים ואמינים, בעיקר עבור אופניים וקורקינטים חשמליים. מוצריה מספקים פתרון מצוין לשדרוגים בתקציב נגיש.' },
                sabvoton: { name: 'Sabvoton', logo: 'https://logo.clearbit.com/sabvoton.com', info: 'Sabvoton מתמחה בייצור בקרים חכמים (Sine Wave) המספקים פעולה חלקה, שקטה ויעילה. הבקרים שלהם פופולריים מאוד בקרב חובבי שיפורים בזכות האמינות והיכולת לתכנת אותם באופן אישי.' },
                fardriver: { name: 'Far Driver', logo: 'https://logo.clearbit.com/fardriver.com', info: 'Far Driver היא יצרנית בקרים מתקדמת המציעה פתרונות בקרה חזקים במיוחד למערכות במתח גבוה. הבקרים שלהם אידיאליים לרכבים הדורשים כוח רב וביצועים קיצוניים.' },
                kt: { name: 'KT (Kunteng)', logo: 'https://placehold.co/150x40/f8f9fa/2c3e50?text=KT', info: 'KT (Kunteng Electronics) היא אחת מהיצרניות הפופולריות ביותר של בקרים ותצוגות לאופניים חשמליים. היא מציעה מגוון רחב של מוצרים אמינים וקלים להתקנה, מה שהופך אותה לבחירה נפוצה בשוק.' },
                eve: { name: 'EVE Energy', logo: 'https://logo.clearbit.com/evebattery.com', info: 'EVE Energy היא יצרנית תאי ליתיום-יון מהגדולות והמוערכות בעולם. תאיה ידועים באיכות הגבוהה, בקיבולת האנרגיה המצוינת ובאורך החיים שלהם, ומשמשים בסיס לסוללות פרימיום.' },
                jikong: { name: 'JIKONG BMS', logo: 'https://logo.clearbit.com/jikong-bms.com', info: 'JIKONG מתמחה בפיתוח וייצור של מערכות ניהול סוללה (BMS) חכמות. מערכות ה-BMS שלהן מציעות ניטור מתקדם, איזון תאים אקטיבי ותקשורת Bluetooth לשליטה מלאה על בריאות הסוללה.' }
            };
            
            // --- Cart Logic ---
            let cart = [];
            const cartSidebar = document.getElementById('cart-sidebar');
            const cartOverlay = document.getElementById('cart-overlay');
            const cartItemsContainer = document.getElementById('cart-items');
            const cartCount = document.getElementById('cart-count');
            const cartTotal = document.getElementById('cart-total');
            const emptyCartMsg = document.getElementById('empty-cart-msg');
            const checkoutBtn = document.getElementById('whatsapp-checkout-btn');

            function openCart() {
                cartSidebar.classList.remove('translate-x-full');
                cartOverlay.classList.remove('hidden');
            }

            function closeCart() {
                cartSidebar.classList.add('translate-x-full');
                cartOverlay.classList.add('hidden');
            }

            function updateCart() {
                cartItemsContainer.innerHTML = '';
                if (cart.length === 0) {
                    emptyCartMsg.classList.remove('hidden');
                    checkoutBtn.classList.add('hidden');
                } else {
                    emptyCartMsg.classList.add('hidden');
                    checkoutBtn.classList.remove('hidden');
                }

                let total = 0;
                cart.forEach((item, index) => {
                    const itemElement = document.createElement('div');
                    itemElement.className = 'flex justify-between items-center py-2 border-b';
                    itemElement.innerHTML = `
                        <div class="w-2/3">
                            <p class="font-bold">${item.name}</p>
                            <p class="text-sm text-slate-500">${item.spec}</p>
                        </div>
                        <div class="flex items-center gap-2">
                            <span class="font-semibold">₪${(item.price * item.quantity).toLocaleString()}</span>
                            <button class="remove-from-cart-btn text-red-500 hover:text-red-700" data-index="${index}">&times;</button>
                        </div>
                    `;
                    cartItemsContainer.appendChild(itemElement);
                    total += item.price * item.quantity;
                });

                cartTotal.textContent = `₪${total.toLocaleString()}`;
                cartCount.textContent = cart.reduce((sum, item) => sum + item.quantity, 0);
                cartCount.classList.toggle('hidden', cart.length === 0);
                
                let message = "שלום Green Power, אני מעוניין להזמין:\n\n";
                cart.forEach(item => {
                    message += `- ${item.name} (${item.spec})\n`;
                });
                message += `\nסה"כ לתשלום: ₪${total.toLocaleString()}`;
                checkoutBtn.href = `https://wa.me/972533224879?text=${encodeURIComponent(message)}`;
            }

            function addToCart(name, price, spec = '') {
                const existingItem = cart.find(item => item.name === name && item.spec === spec);
                if (existingItem) {
                     alert('המוצר כבר קיים בעגלה.');
                } else {
                    cart.push({ name, price: Number(price), quantity: 1, spec });
                }
                updateCart();
                openCart();
            }

            cartItemsContainer.addEventListener('click', (e) => {
                if (e.target.classList.contains('remove-from-cart-btn')) {
                    const index = parseInt(e.target.dataset.index);
                    cart.splice(index, 1);
                    updateCart();
                }
            });

            document.getElementById('cart-button').addEventListener('click', openCart);
            document.getElementById('close-cart-btn').addEventListener('click', closeCart);
            cartOverlay.addEventListener('click', closeCart);

            // Hero Headline Changer
            const headlines = [ "הבית שלכם לאנרגיה חשמלית", "העתיד של הכוח. מותאם אישית.", "ביצועים. אמינות. חדשנות.", "פתרונות הנעה חשמלית מתקדמים" ];
            let headlineIndex = 0;
            const dynamicHeadline = document.getElementById('hero-headline-dynamic');
            setInterval(() => {
                headlineIndex = (headlineIndex + 1) % headlines.length;
                dynamicHeadline.classList.add('opacity-0');
                setTimeout(() => { dynamicHeadline.textContent = headlines[headlineIndex]; dynamicHeadline.classList.remove('opacity-0'); }, 500);
            }, 5000);

            // Battery Calculator
            const initBatteryCalculator = () => {
                 const masterCalcState = { vehicle: null, voltage: null, series: null, model: null, capacity: null, upgrade: null };
                 const step2 = document.getElementById('calc-step-2'), step3 = document.getElementById('calc-step-3'), step4 = document.getElementById('calc-step-4'), result = document.getElementById('calc-result');
                 const paramSelector = document.getElementById('parameter-selector'), paramSelector2 = document.getElementById('parameter-selector-2'), capacitySelector = document.getElementById('capacity-selector');
                const resetCalculator = (fromStep = 1) => {
                    if (fromStep <= 1) masterCalcState.vehicle = null;
                    if (fromStep <= 2) { masterCalcState.series = null; masterCalcState.model = null; step2.classList.remove('visible'); paramSelector.innerHTML = ''; }
                    if (fromStep <= 3) { masterCalcState.voltage = null; step3.classList.remove('visible'); paramSelector2.innerHTML = ''; }
                    if (fromStep <= 4) { masterCalcState.capacity = null; masterCalcState.upgrade = null; step4.classList.remove('visible'); capacitySelector.innerHTML = ''; }
                    result.classList.remove('visible');
                    document.getElementById('master-add-to-cart-btn').classList.add('hidden');
                };
                const updatePrice = () => {
                    if (!masterCalcState.vehicle) return;
                    const addToCartBtn = document.getElementById('master-add-to-cart-btn');
                    const vehicleData = pricingData[masterCalcState.vehicle];
                    let price = '---', selectionText = vehicleData.name, specText = '';
                    switch(vehicleData.type) {
                        case 'simple': if (masterCalcState.voltage && masterCalcState.capacity && masterCalcState.series) { specText = `${masterCalcState.voltage}V ${masterCalcState.capacity}Ah`; selectionText = `${vehicleData.name} (${masterCalcState.series})`; price = vehicleData.data[masterCalcState.series][masterCalcState.voltage][masterCalcState.capacity]; } break;
                        case 'series': if (masterCalcState.series && masterCalcState.capacity) { specText = `72V ${masterCalcState.capacity}Ah`; selectionText = `${vehicleData.name} (${masterCalcState.series})`; price = vehicleData.data[masterCalcState.series]['72'][masterCalcState.capacity]; } break;
                        case 'model': if (masterCalcState.model && masterCalcState.upgrade) { const upgradeData = vehicleData.data[masterCalcState.model].find(item => item.name === masterCalcState.upgrade); if(upgradeData) { price = upgradeData.price; } selectionText = `${vehicleData.name}`; specText = `${masterCalcState.upgrade}`; } break;
                    }
                    
                    document.getElementById('master-selection-text').innerHTML = `${selectionText} ${specText}`;
                    document.getElementById('master-price-output').textContent = (typeof price === 'number') ? `₪${price.toLocaleString()}` : '--';
                    
                    if (typeof price === 'number') {
                        addToCartBtn.classList.remove('hidden');
                        addToCartBtn.onclick = () => addToCart(selectionText, price, specText);
                    } else {
                        addToCartBtn.classList.add('hidden');
                    }

                    result.classList.add('visible');
                };
                const setupCapacitySlider = (options) => {
                    capacitySelector.innerHTML = `<input type="range" id="master-ah-slider" class="w-full"> <div class="flex justify-between text-sm text-slate-500 mt-1 px-1"> <span id="master-ah-min"></span> <span id="master-ah-max"></span> </div>`;
                    const slider = document.getElementById('master-ah-slider');
                    options.sort((a,b) => a - b);
                    slider.min = 0; slider.max = options.length - 1; slider.value = 0; slider.step = 1;
                    document.getElementById('master-ah-min').textContent = `${options[0]}Ah`;
                    document.getElementById('master-ah-max').textContent = `${options[options.length - 1]}Ah`;
                    const updateSlider = () => { masterCalcState.capacity = options[slider.value]; updatePrice(); };
                    slider.oninput = updateSlider; updateSlider();
                    step4.classList.add('visible');
                };
                const showStep = (step, title, content) => {
                    const stepEl = document.getElementById(`calc-step-${step}`);
                    const titleEl = document.getElementById(`step-${step}-title`);
                    const selectorEl = step === 4 ? capacitySelector : (step === 2 ? paramSelector : paramSelector2);
                    if (titleEl) titleEl.textContent = title;
                    selectorEl.innerHTML = content;
                    stepEl.classList.add('visible');
                };
                const startCalculator = () => {
                    resetCalculator(2);
                    const vehicleData = pricingData[masterCalcState.vehicle];
                    if (!vehicleData) return;
                    switch (vehicleData.type) {
                        case 'simple':
                            showStep(2, `שלב 2: בחרו סדרה עבור ${vehicleData.name}`, `<div><input type="radio" name="series" id="sPRO" value="PRO" class="hidden control-radio"><label for="sPRO" class="control-radio-btn flex flex-col items-center">🚀 PRO</label></div><div><input type="radio" name="series" id="sCLASSIC" value="CLASSIC" class="hidden control-radio"><label for="sCLASSIC" class="control-radio-btn flex flex-col items-center">⚙️ CLASSIC</label></div>`);
                            paramSelector.querySelectorAll('input').forEach(radio => {
                                radio.onchange = (e) => {
                                    resetCalculator(3); masterCalcState.series = e.target.value;
                                    const voltages = Object.keys(vehicleData.data[masterCalcState.series]);
                                    showStep(3, 'שלב 3: בחרו מתח (Voltage)', voltages.map(v => `<input type="radio" name="voltage" id="v${v}" value="${v}" class="hidden control-radio"><label for="v${v}" class="control-radio-btn">${v}V</label>`).join(''));
                                    paramSelector2.querySelectorAll('input').forEach(radioV => {
                                        radioV.onchange = (ev) => {
                                            resetCalculator(4); masterCalcState.voltage = ev.target.value;
                                            const ahOptions = Object.keys(vehicleData.data[masterCalcState.series][masterCalcState.voltage]).map(Number);
                                            setupCapacitySlider(ahOptions);
                                        }
                                    });
                                };
                            });
                            break;
                        case 'series':
                             showStep(2, `שלב 2: בחרו סדרה עבור ${vehicleData.name}`, Object.keys(vehicleData.data).map(s => `<input type="radio" name="series" id="s${s}" value="${s}" class="hidden control-radio"><label for="s${s}" class="control-radio-btn">${s === 'EXTREME' ? '🚀 EXTREME' : '⚙️ CLASSIC'}</label>`).join(''));
                            paramSelector.querySelectorAll('input').forEach(radio => { radio.onchange = (e) => { 
                                resetCalculator(3); 
                                masterCalcState.series = e.target.value;
                                masterCalcState.voltage = '72';
                                showStep(3, 'שלב 3: מתח המערכת', `<label class="control-radio-btn selected">72V (קבוע)</label>`);
                                const ahOptions = Object.keys(vehicleData.data[masterCalcState.series]['72']).map(Number);
                                setupCapacitySlider(ahOptions);
                             }; 
                            });
                            break;
                        case 'model':
                            showStep(2, `שלב 2: בחרו דגם ${vehicleData.name}`, Object.keys(vehicleData.data).map(m => `<input type="radio" name="model" id="m${m}" value="${m}" class="hidden control-radio"><label for="m${m}" class="control-radio-btn">${m}</label>`).join(''));
                            paramSelector.querySelectorAll('input').forEach(radio => { radio.onchange = (e) => { resetCalculator(3); masterCalcState.model = e.target.value; const upgrades = vehicleData.data[masterCalcState.model]; showStep(3, 'שלב 3: בחרו שדרוג', `<select id="upgrade-select" class="w-full p-2">${upgrades.map(u => `<option value="${u.name}">${u.name}</option>`).join('')}</select>`); const sel = document.getElementById('upgrade-select'); const update = () => { masterCalcState.upgrade = sel.value; updatePrice(); }; sel.onchange = update; update(); }; });
                            break;
                    }
                };
                document.getElementById('vehicle-selector').addEventListener('click', e => {
                    const button = e.target.closest('button');
                    if(!button) return;
                    document.querySelectorAll('#vehicle-selector button').forEach(b => b.classList.remove('selected'));
                    button.classList.add('selected');
                    resetCalculator();
                    masterCalcState.vehicle = button.dataset.vehicle;
                    startCalculator();
                });
            };
            
            // Pricelist Calculator
            const initPricelistCalculator = () => {
                const step2 = document.getElementById('pricelist-step-2'), step3 = document.getElementById('pricelist-step-3');
                const subcategorySelector = document.getElementById('subcategory-selector'), itemSelector = document.getElementById('item-selector');
                const sliderContainer = document.getElementById('power-slider-container');
                const slider = document.getElementById('power-slider');
                const sliderMin = document.getElementById('power-slider-min');
                const sliderMax = document.getElementById('power-slider-max');

                let currentItems = [];

                const reset = (fromStep = 1) => {
                    if (fromStep <= 2) { 
                        step2.classList.remove('visible'); 
                        subcategorySelector.innerHTML = ''; 
                    }
                    if (fromStep <= 3) { 
                        step3.classList.remove('visible'); 
                        itemSelector.innerHTML = ''; 
                        sliderContainer.classList.add('hidden');
                    }
                };

                const createItemCard = (item) => {
                    const card = document.createElement('div');
                    card.className = 'card p-4 flex flex-col justify-between text-center';
                    card.dataset.power = item.power || 0;
                    let priceHTML = isNaN(item.price) ? `<span class="text-slate-600 font-bold">${item.price}</span>` : `<span class="text-2xl font-bold text-teal-600">₪${Number(item.price).toLocaleString()}</span>`;
                    
                    card.innerHTML = `
                        <div class="flex-grow">
                            <img src="https://placehold.co/150x100/e8f8f5/2c3e50?text=${item.name.replace(' ', '+')}" alt="${item.name}" class="mx-auto mb-2 rounded">
                            <h4 class="font-bold text-lg">${item.brand ? `[${item.brand}] ` : ''}${item.name}</h4>
                            <p class="text-slate-500 text-sm mb-2">${item.spec}</p>
                        </div>
                        <div class="mt-auto">
                            ${priceHTML}
                            <button class="add-to-cart-btn-pricelist w-full mt-2 bg-slate-200 text-slate-700 font-semibold py-2 px-4 rounded-lg hover:bg-slate-300 transition-colors">
                                הוסף לסל
                            </button>
                        </div>
                    `;
                    
                    if (isNaN(item.price)) {
                       card.querySelector('.add-to-cart-btn-pricelist').textContent = 'צור קשר לפרטים';
                       card.querySelector('.add-to-cart-btn-pricelist').onclick = () => { window.open(`https://wa.me/972533224879?text=שלום, אשמח לפרטים על ${item.name}`); };
                    } else {
                       card.querySelector('.add-to-cart-btn-pricelist').onclick = () => addToCart(item.name, item.price, item.spec);
                    }
                    return card;
                };
                
                const updateSliderAndItems = (items) => {
                    currentItems = items.sort((a, b) => (a.power || 0) - (b.power || 0));
                    const minPower = currentItems.length > 0 ? currentItems[0].power : 0;
                    const maxPower = currentItems.length > 0 ? currentItems[currentItems.length - 1].power : 0;
                    
                    if (maxPower > 0) {
                        slider.min = minPower;
                        slider.max = maxPower;
                        slider.value = maxPower;
                        sliderMin.textContent = `${minPower}W`;
                        sliderMax.textContent = `${maxPower}W`;
                        sliderContainer.classList.remove('hidden');
                        filterItemsByPower();
                    } else {
                        sliderContainer.classList.add('hidden');
                        displayItems(currentItems);
                    }
                    step3.classList.add('visible');
                };
                
                const filterItemsByPower = () => {
                    const maxVal = parseInt(slider.value);
                    itemSelector.innerHTML = '';
                    currentItems.filter(item => (item.power || 0) <= maxVal)
                        .sort((a,b) => (b.power || 0) - (a.power || 0)) // re-sort descending for display
                        .forEach(item => {
                            itemSelector.appendChild(createItemCard(item));
                        });
                };

                slider.addEventListener('input', filterItemsByPower);

                const displayItems = (items) => {
                    itemSelector.innerHTML = '';
                    items.sort((a, b) => (b.power || 0) - (a.power || 0)).forEach(item => {
                        itemSelector.appendChild(createItemCard(item));
                    });
                    step3.classList.add('visible');
                };

                document.getElementById('category-selector').addEventListener('click', e => {
                    const button = e.target.closest('button');
                    if (!button) return;
                    document.querySelectorAll('#category-selector button').forEach(b => b.classList.remove('selected'));
                    button.classList.add('selected');
                    reset(2);
                    const category = button.dataset.category;
                    const categoryData = pricelistData[category];
                    
                    document.getElementById('pricelist-step-3-title').textContent = '';
                    itemSelector.innerHTML = ''; 

                    if (categoryData.types) {
                        let titleHTML = `שלב 2: בחרו סוג`;
                        subcategorySelector.innerHTML = Object.entries(categoryData.types).map(([key, value]) => {
                             return `<div class="flex items-center gap-1">
                                <button class="control-radio-btn" data-category="${category}" data-type="${key}">${value.name}</button>
                                <div class="info-tooltip-container">
                                    <i class="info-tooltip-icon">i</i>
                                    <div class="info-tooltip-text">${value.description}</div>
                                </div>
                            </div>`
                        }).join('');
                        document.getElementById('pricelist-step-2-title').innerHTML = titleHTML;
                        step2.classList.add('visible');
                    } else if (categoryData.brands) {
                        document.getElementById('pricelist-step-2-title').textContent = `שלב 2: בחרו מותג`;
                        subcategorySelector.innerHTML = Object.entries(categoryData.brands).map(([key, value]) => 
                            `<button class="control-radio-btn" data-category="${category}" data-brand="${key}">${value.name}</button>`
                        ).join('');
                        step2.classList.add('visible');
                    }
                    else {
                        document.getElementById('pricelist-step-3-title').textContent = `שירותי מעבדה`;
                        displayItems(categoryData.items);
                    }
                });

                subcategorySelector.addEventListener('click', e => {
                    const button = e.target.closest('button');
                    if (!button) return;
                    
                    document.querySelectorAll('#subcategory-selector button').forEach(b => b.classList.remove('selected'));
                    button.classList.add('selected');
                    
                    const category = button.dataset.category;
                    const categoryData = pricelistData[category];

                    if (button.dataset.type) {
                        const type = button.dataset.type;
                        const typeData = categoryData.types[type];
                        document.getElementById('pricelist-step-3-title').textContent = `שלב 3: בחרו פריט (${typeData.name})`;
                        updateSliderAndItems(typeData.items);
                    } else if (button.dataset.brand) {
                        const brand = button.dataset.brand;
                        const brandData = categoryData.brands[brand];
                        document.getElementById('pricelist-step-3-title').textContent = `שלב 3: בחרו פריט (${brandData.name})`;
                        updateSliderAndItems(brandData.items);
                    }
                });
            };
              
            // Testimonials Fading
            const initFadingTestimonials = () => {
                const container = document.getElementById('testimonials-container');
                if (!container) return;

                const slides = [];
                for (let i = 0; i < testimonialsData.length; i += 3) {
                    slides.push(testimonialsData.slice(i, i + 3));
                }

                let contentHTML = '';
                slides.forEach((slide, slideIndex) => {
                    let slideHTML = `<div class="testimonial-slide grid grid-cols-1 md:grid-cols-3 gap-4">`;
                    slide.forEach((t, cardIndex) => {
                        const avatarIndex = (slideIndex * 3 + cardIndex) % testimonialAvatars.length;
                        const avatarSrc = testimonialAvatars[avatarIndex];
                        slideHTML += `
                            <div class="card p-6 h-full flex flex-col justify-between">
                                <div>
                                    <div class="flex items-center mb-4">
                                        <img src="${avatarSrc}" alt="Avatar of ${t.name}" class="rounded-full w-12 h-12 ml-4 object-cover">
                                        <div>
                                            <span class="font-bold text-slate-800">${t.name}</span>
                                            <div class="text-yellow-400">★★★★★</div>
                                        </div>
                                    </div>
                                    <p class="text-slate-600">${t.text}</p>
                                </div>
                            </div>`;
                    });
                    slideHTML += `</div>`;
                    contentHTML += slideHTML;
                });
                
                container.innerHTML = contentHTML;

                const slideElements = container.querySelectorAll('.testimonial-slide');
                if (slideElements.length === 0) return;

                let currentIndex = 0;
                slideElements[currentIndex].classList.add('active');

                setInterval(() => {
                    slideElements[currentIndex].classList.remove('active');
                    currentIndex = (currentIndex + 1) % slideElements.length;
                    slideElements[currentIndex].classList.add('active');
                }, 5000);
            };

             // AI Recommender
            const initAIRecommender = () => {
                const button = document.getElementById('recommender-button');
                const resultDiv = document.getElementById('recommender-result');
                const loader = document.getElementById('recommender-loader');

                button.addEventListener('click', async () => {
                    const vehicle = document.getElementById('recommender-vehicle').value;
                    const goal = document.getElementById('recommender-goal').value;
                    const weight = document.getElementById('recommender-weight').value;
                    const terrain = document.getElementById('recommender-terrain').value;
                    const notes = document.getElementById('recommender-notes').value;

                    resultDiv.classList.add('hidden');
                    loader.classList.remove('hidden');
                    button.disabled = true;

                    const systemPrompt = `You are "Green Power's Expert", a technical AI consultant specializing in building custom electric vehicle systems. Your role is to take user inputs (vehicle type, primary goal, additional notes) and recommend a full system (battery, motor, controller) using ONLY the provided product lists. You must return a response in a fixed JSON format.
                    Rules:
                    1.  **Strictly Adhere to Inventory**: Use ONLY products from the 'pricingData' and 'pricelistData' objects provided. Do not invent products.
                    2.  **Ensure Compatibility**: Match components logically (e.g., a 72V controller for a 72V motor and a 72V battery).
                    3.  **Justify Your Choices**: For each component, provide a brief, one-sentence explanation for your choice based on the user's goal.
                    4.  **Calculate Total Price**: Sum the prices of the chosen components.
                    5.  **JSON Format Only**: Your entire output MUST be in the following JSON structure:
                        {
                          "recommendation": {
                            "battery": { "name": "Battery Name", "spec": "Spec", "price": 1234, "reason": "Reasoning..." },
                            "motor": { "name": "Motor Name", "spec": "Spec", "price": 1234, "reason": "Reasoning..." },
                            "controller": { "name": "Controller Name", "spec": "Spec", "price": 1234, "reason": "Reasoning..." }
                          },
                          "totalPrice": 4567,
                          "summary": "A brief summary of the recommendation and how it fits the user's needs."
                        }`;

                    const userQuery = `
                        Hello, I need a recommendation for an electric system.
                        Vehicle Type: ${vehicle}
                        Primary Goal: ${goal}
                        Rider Weight: ${weight || 'not specified'}
                        Primary Terrain: ${terrain}
                        Additional Notes: ${notes || 'none'}

                        Please build a recommendation based ONLY on the following product lists:
                        Battery Pricelist: ${JSON.stringify(pricingData)}
                        Equipment Pricelist: ${JSON.stringify(pricelistData)}
                    `;

                    try {
                        const responseText = await callGeminiAPI(systemPrompt, userQuery);
                        const jsonResponse = JSON.parse(responseText);
                        
                        const { recommendation, totalPrice, summary } = jsonResponse;
                        
                        let resultHTML = `<h4>הנה ההמלצה המותאמת אישית עבורך:</h4>`;
                        resultHTML += `<p>${summary}</p><hr class="my-3">`;

                        const itemsToAdd = [];

                        if (recommendation.battery) {
                            resultHTML += `
                                <div class="mb-2"><strong>🔋 סוללה:</strong> ${recommendation.battery.name} ${recommendation.battery.spec} (₪${recommendation.battery.price.toLocaleString()})<br>
                                <small><em>סיבה: ${recommendation.battery.reason}</em></small></div>`;
                            itemsToAdd.push({ name: recommendation.battery.name, price: recommendation.battery.price, spec: recommendation.battery.spec });
                        }
                        if (recommendation.motor) {
                            resultHTML += `
                                <div class="mb-2"><strong>⚙️ מנוע:</strong> ${recommendation.motor.name} ${recommendation.motor.spec} (₪${recommendation.motor.price.toLocaleString()})<br>
                                <small><em>סיבה: ${recommendation.motor.reason}</em></small></div>`;
                             itemsToAdd.push({ name: recommendation.motor.name, price: recommendation.motor.price, spec: recommendation.motor.spec });
                        }
                        if (recommendation.controller) {
                            resultHTML += `
                                <div class="mb-2"><strong>🧠 בקר:</strong> ${recommendation.controller.name} ${recommendation.controller.spec} (₪${recommendation.controller.price.toLocaleString()})<br>
                                <small><em>סיבה: ${recommendation.controller.reason}</em></small></div>`;
                            itemsToAdd.push({ name: recommendation.controller.name, price: recommendation.controller.price, spec: recommendation.controller.spec });
                        }

                        resultHTML += `<hr class="my-3"><div class="text-xl font-bold"><strong>מחיר כולל מוערך: ₪${totalPrice.toLocaleString()}</strong></div>`;

                        const addToCartBtn = document.createElement('button');
                        addToCartBtn.className = 'btn-primary w-full mt-4';
                        addToCartBtn.textContent = 'הוסף הכל לסל';
                        addToCartBtn.onclick = () => {
                            itemsToAdd.forEach(item => addToCart(item.name, item.price, item.spec));
                        };

                        resultDiv.innerHTML = resultHTML;
                        resultDiv.appendChild(addToCartBtn);

                    } catch (error) {
                        console.error("Error parsing Gemini response:", error);
                        resultDiv.innerHTML = "<p>אופס, קרתה שגיאה. נסו לנסח את הבקשה קצת אחרת.</p>";
                    } finally {
                        loader.classList.add('hidden');
                        resultDiv.classList.remove('hidden');
                        button.disabled = false;
                    }
                });
            };
            
            // Knowledge Center & AI Tools
            const initAITools = () => {
                // Generic handler for simple AI tools
                const setupAITool = (buttonId, inputIds, resultContainerId, systemPromptGenerator) => {
                    const button = document.getElementById(buttonId);
                    const inputs = inputIds.map(id => document.getElementById(id));
                    const resultContainer = document.getElementById(resultContainerId);

                    if (!button || !resultContainer || inputs.some(inp => !inp)) {
                         console.error(`Initialization failed for AI tool with button #${buttonId}. One or more elements are missing.`);
                        return;
                    }

                    button.addEventListener('click', async () => {
                        const values = inputs.map(inp => inp.value.trim());
                        if (values.some(val => val === '')) {
                            resultContainer.innerHTML = '<p class="text-red-500">אנא מלא את כל השדות הרלוונטיים.</p>';
                            resultContainer.classList.remove('hidden');
                            return;
                        }
                        
                        resultContainer.innerHTML = `<div class="flex justify-center items-center"><div class="animate-spin rounded-full h-5 w-5 border-b-2 border-teal-600"></div></div>`;
                        resultContainer.classList.remove('hidden');
                        button.disabled = true;

                        const systemPrompt = systemPromptGenerator(...values);
                        
                        try {
                           const response = await callGeminiTextAPI(systemPrompt, "");
                           resultContainer.innerHTML = response.replace(/\n/g, '<br>');
                        } catch(e) {
                           resultContainer.innerHTML = '<p>שגיאה. נסה שוב.</p>';
                        } finally {
                           button.disabled = false;
                        }
                    });
                };
                
                // Range Calculator Setup
                setupAITool(
                    'range-button', ['range-battery', 'range-weight'], 'range-result-container', 
                    (capacity, weight) => `You are a range calculator expert for electric vehicles. Based on a battery capacity of ${capacity}Ah and a rider weight of ${weight}kg, provide an estimated travel range in kilometers. Give a concise, one-sentence answer.`
                );

                // Fault Diagnoser Setup
                setupAITool(
                    'fault-button', ['fault-description'], 'fault-result-container', 
                    (description) => `You are an expert electric vehicle technician. A user describes a problem: "${description}". Provide a numbered list of 2-3 likely causes and what to check for each.`
                );

                // Knowledge Center Setup (has a different structure)
                const knowledgeInput = document.getElementById('knowledge-ai-input');
                const knowledgeButton = document.getElementById('knowledge-ai-button');
                const knowledgeResultDiv = document.getElementById('knowledge-ai-result');
                const knowledgeContentDiv = document.getElementById('knowledge-ai-content');
                const knowledgeLoader = document.getElementById('knowledge-ai-loader');
                
                const handleKnowledgeQuery = async (query) => {
                     if (!query) {
                        knowledgeContentDiv.innerHTML = '<p class="text-red-600 font-bold">אנא כתבו שאלה או נושא למאמר.</p>';
                        knowledgeResultDiv.classList.remove('hidden');
                        return;
                    }
                    knowledgeResultDiv.classList.remove('hidden');
                    knowledgeContentDiv.innerHTML = '';
                    knowledgeLoader.style.display = 'block';
                    knowledgeButton.disabled = true;
                    knowledgeInput.disabled = true;
                    const systemPrompt = `אתה "המומחה של Green Power", יועץ AI מקצועי למעבדת סוללות ופתרונות הנעה חשמלית. עליך לענות על שאלות של משתמשים בצורה מקצועית, ברורה וידידותית. השתמש בהדגשות (**) למונחים חשובים וסיים כל תשובה בהצעה ליצור קשר.`;
                    try {
                        const responseText = await callGeminiTextAPI(systemPrompt, query);
                        knowledgeContentDiv.innerHTML = responseText.replace(/\n/g, '<br>').replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>');
                    } catch (e) {
                        knowledgeContentDiv.innerHTML = '<p>שגיאה. נסה שוב.</p>';
                    } finally {
                        knowledgeLoader.style.display = 'none';
                        knowledgeButton.disabled = false;
                        knowledgeInput.disabled = false;
                    }
                };

                if (knowledgeButton) {
                    knowledgeButton.addEventListener('click', () => handleKnowledgeQuery(knowledgeInput.value.trim()));
                }
                document.querySelectorAll('.faq-btn').forEach(btn => {
                    btn.addEventListener('click', () => {
                        const query = btn.textContent.trim();
                        knowledgeInput.value = query;
                        handleKnowledgeQuery(query);
                    });
                });
            };

            // Gallery
            const initGallery = () => {
                const galleryGrid = document.getElementById('gallery-grid'), modal = document.getElementById('lightbox-modal');
                const modalImage = document.getElementById('lightbox-image'), modalCaption = document.getElementById('lightbox-caption'), closeModalBtn = document.getElementById('close-modal');
                galleryItems.forEach(item => {
                    const galleryItem = document.createElement('div');
                    galleryItem.className = 'card overflow-hidden cursor-pointer';
                    galleryItem.innerHTML = `<img src="${item.src}" alt="${item.caption}" class="w-full h-48 object-cover transition-transform duration-300 hover:scale-110"><div class="p-2 text-center"><p class="text-sm text-slate-600">${item.caption}</p></div>`;
                    galleryItem.addEventListener('click', () => { modalImage.src = item.src; modalCaption.textContent = item.caption; modal.classList.remove('hidden'); });
                    galleryGrid.appendChild(galleryItem);
                });
                const closeModal = () => modal.classList.add('hidden');
                closeModalBtn.addEventListener('click', closeModal);
                modal.addEventListener('click', (e) => { if (e.target === modal) closeModal(); });
            };

            // Brands Section
            const initBrands = () => {
                const container = document.getElementById('brands-container');
                const modal = document.getElementById('brand-modal');
                const modalContent = document.getElementById('brand-modal-content');
                const closeModalBtn = document.getElementById('close-brand-modal');

                Object.keys(brandData).forEach(key => {
                    const brand = brandData[key];
                    const logoImg = document.createElement('img');
                    logoImg.src = brand.logo;
                    logoImg.title = brand.name;
                    logoImg.alt = `${brand.name} Logo`;
                    logoImg.onerror = () => { logoImg.src = `https://placehold.co/150x40/f8f9fa/2c3e50?text=${brand.name.replace(' ', '+')}`; };
                    logoImg.addEventListener('click', () => {
                        modalContent.innerHTML = `
                            <h3 class="text-2xl font-bold mb-2">${brand.name}</h3>
                            <p>${brand.info}</p>
                        `;
                        modal.classList.remove('hidden');
                    });
                    container.appendChild(logoImg);
                });

                const closeBrandModal = () => modal.classList.add('hidden');
                closeModalBtn.addEventListener('click', closeBrandModal);
                modal.addEventListener('click', (e) => { if(e.target === modal) closeBrandModal(); });
            };


            // Animations
            const initAnimations = () => {
                const observer = new IntersectionObserver((entries) => { entries.forEach(entry => { if (entry.isIntersecting) { entry.target.classList.add('is-visible'); } }); }, { threshold: 0.1 });
                document.querySelectorAll('.fade-in-section').forEach(section => observer.observe(section));
            };
            
            const callGeminiAPI = async (systemPrompt, userQuery) => {
                const apiKey = ""; const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${apiKey}`;
                const payload = { contents: [{ parts: [{ text: userQuery }] }], systemInstruction: { parts: [{ text: systemPrompt }] }, generationConfig: { responseMimeType: "application/json" } };
                try {
                    const response = await fetch(apiUrl, { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(payload) });
                    if (!response.ok) { throw new Error(`API call failed: ${response.status}`); }
                    const result = await response.json();
                    return result.candidates?.[0]?.content.parts[0].text || "{}";
                } catch (error) { console.error("Gemini API call error:", error); return "{}"; }
            };

             const callGeminiTextAPI = async (systemPrompt, userQuery) => {
                const apiKey = ""; const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${apiKey}`;
                const payload = { contents: [{ parts: [{ text: userQuery }] }], systemInstruction: { parts: [{ text: systemPrompt }] }};
                try {
                    const response = await fetch(apiUrl, { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(payload) });
                    if (!response.ok) { throw new Error(`API call failed: ${response.statusText}`); }
                    const result = await response.json();
                    return result.candidates?.[0]?.content.parts[0].text || "מצטער, לא הצלחתי לעבד את הבקשה.";
                } catch (error) { console.error("Gemini API call error:", error); return "אופס, נתקלנו בבעיית תקשורת."; }
            };

            // Initializations
            initBatteryCalculator();
            initPricelistCalculator();
            initFadingTestimonials();
            initAIRecommender();
            initAITools();
            initGallery();
            initBrands();
            initAnimations();
        });
    </script>
</body>
</html>
